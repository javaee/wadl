\documentclass[11pt]{article}
\usepackage{times}
\usepackage{moreverb}
\usepackage{tabularx}
\usepackage{wadl} % just fixes verbatim font style to make it smaller
\usepackage[pdftex]{graphicx}
\usepackage[pdftex,
  pdftitle={Web Application Description Language (WADL)},
  pdfauthor={Marc J. Hadley, Sun Microsystems Inc.},
  pdfsubject={Web Application Description Language (WADL)},
  pdfkeywords={XML Web services HTTP},
  letterpaper=true,
  bookmarksnumbered=true
]{hyperref}


\textwidth = 6.5 in
\textheight = 9 in
\oddsidemargin = 0.0 in
\evensidemargin = 0.0 in
\topmargin = 0.0 in
\headheight = 0.0 in
\headsep = 0.0 in
\parskip = 0.2in
\parindent = 0.0in

\title{Web Application Description Language (WADL)}
\author{Marc J. Hadley, Sun Microsystems Inc.}
% \date{July 2006}
\begin{document}
\def\verbatim@font{\small\ttfamily}
\newcommand{\code}[1]{\texttt{\small #1}}
\maketitle
\begin{abstract}
This specification describes the Web Application Description Language (WADL). An increasing number of Web-based enterprises (Google, Yahoo, Amazon, Flickr to name but a few) are developing HTTP-based applications that provide programatic access to their internal data. Typically these applications are described using textual documentation that is sometimes supplemented with more formal specifications such as XML schema for XML-based data formats. WADL is designed to provide a machine process-able description of such HTTP-based Web applications. 
\end{abstract}

\section{Introduction}

This specification describes the Web Application Description Language (WADL). WADL is designed to provide a machine process-able description of HTTP-based Web applications. 

\subsection{Web Applications}

For the purposes of this specification, a Web application is defined as a HTTP-based application whose interactions are amenable to machine processing. While many existing Web sites are examples of HTTP-based applications, a large number of those require human cognitive function for successful non-brittle\footnote{Brittle use, e.g., HTML page scraping, is generally always possible but less desirable in terms of maintenance, efficiency and performance.} use. Typically Web applications:
        
\begin{itemize}
\item Are based on existing Web architecture and infrastructure
\item Are platform and programming language independent
\item Promote re-use of the application beyond the browser
\item Enable composition with other Web or desktop applications
\item Require semantic clarity in content (representations) exchanged during their use
\end{itemize}
        
The latter requirement can be fulfilled by the use of a self-describing data format such as XML or JSON. XML is particularly suitable since it allows the definition of a complete custom schema for the application domain or the embedding of a custom micro-format in an existing schema using its extensibility points.

Given the above definition of a Web application, one can see that the following aspects of an application could be usefully described in a machine processable format:
        
\begin{description}
\item[Set of resources] Analogous to a site map showing the resources on offer.
\item[Relationships between resources] Describing the links between resources, both referential and causal.
\item[Methods that can be applied to each resource] The HTTP methods that can be applied to each resource, the expected inputs and outputs and their supported formats.
\item[Resource representation formats] The supported MIME types and data schemas in use.
\end{description}

\subsection{Use Cases}

The current state-of-the-art in Web application description is textual documentation plus one or more data format definitions, e.g. XML schemata. Whilst entirely adequate for human consumption, this level of description precludes the following use cases which require a more machine-friendly description format:

\begin{description}
\item[Application Modelling and Visualization] Support for development of resource modelling tools for resource relationship and choreography analysis and manipulation.
\item[Code Generation] Automated generation of stub and skeleton code and code for manipulation of resource representations.
\item[Configuration] Configuration of client and server using a portable format.
\end{description}

It would also be useful to have a common foundation for individual applications and protocols to re-use and perhaps extend rather than each inventing a new description format.

\subsection{Example WADL Description}

The following listing shows an example of a WADL description for the Yahoo News Search\cite{yahoows} application.

\listinginput[1]{1}{YahooSearch.wadl}

Lines 2--8 begin an application description and define the XML namespaces used elsewhere in the service description. Lines 9--14 define the XML grammars used by the service, in this case two W3C XML Schema files are included by reference. Lines 16--45 describe the Yahoo News Search Web resource and the HTTP methods it supports. Lines 18--43 describe the \lq search\rq\ GET method: lines 19--36 describe the input; lines 37--42 describe the possible outputs.

\section{Description Components}

All WADL elements have the following XML namespace name:

\begin{itemize}
\item \code{http://wadl.dev.java.net/2009/02}
\end{itemize}

This section describes each component of a WADL document in detail.

\subsection{Application}
\label{application}

The \code{application} element forms the root of a WADL description and contains the following:

\begin{enumerate}
\item Zero or more \code{doc} elements -- see section \ref{doc}.
\item An optional \code{grammars} element -- see section \ref{grammars}.
\item Zero or more \code{resources} elements -- see section \ref{resources}.
\item Zero or more of the following:
\begin{itemize}
\item \code{resource\_type} elements --  see section \ref{resourcetype}.
\item \code{method} elements --  see section \ref{method}.
\item \code{representation} elements -- see section \ref{representation}.
\item \code{param} elements -- see section \ref{param}.
\end{itemize}
\end{enumerate}

\subsection{Documentation}
\label{doc}

Each WADL-defined element can have one or more child \code{doc} elements that can be used to document that element. The \code{doc} element has the following attributes:

\begin{description}
\item[\code{xml:lang}] Defines the language for the \code{title} attribute value and the contents of the \code{doc} element. If an element contains more than one \code{doc} element then they MUST have distinct values for their \code{xml:lang} attribute.
\item[\code{title}] A short plain text description of the element being documented, the value SHOULD be suitable for use as a title for the contained documentation.
\end{description}

The \code{doc} element has mixed content and may contain text and zero or more child elements that form the body of the documentation. It is RECOMMENDED that the child elements be members of the text, list or table modules of XHTML\cite{xhtmlmodularization}.

\subsection{Grammars}
\label{grammars}

The \code{grammars} element acts as a container for definitions of the format of data exchanged during execution of the protocol described by the WADL document. Such definitions may be included inline or by reference using the \code{include} element (see section \ref{include}). No particular data format definition language language is mandated; sections \ref{usingrelaxng} and \ref{usingxsd} describe use of RelaxNG and W3C XML Schema with WADL, respectively.

It is permissible to include multiple definitions of a particular format: such definitions are assumed to be equivalent and consumers of a WADL description are free to choose amongst the alternatives or even combine them if they support that capability.

\subsubsection{Include}
\label{include}

The \code{include} element allows the definitions of one or more data format descriptions  to be included by reference. The \code{href} attribute provides a URI for the referenced definitions and is of type \code{xsd:anyURI}. Use of the \code{include} element is logically equivalent to in-lining the referenced document within the WADL \code{grammars} element.

\subsection{Resources}
\label{resources}

The \code{resources} element acts as a container for the resources provided by the application. A \code{resources} element has a \code{base} attribute of type \code{xsd:anyURI} that provides the base URI for each child resource identifier. Descendent \code{resource} elements (see section \ref{resource}) describe the resources provided by the application.

\subsection{Resource}
\label{resource}

A \code{resource} element describes a set of resources, each identified by a URI that follows a common pattern. A \code{resource} element has the following attributes:

\begin{description}
\item[\code{id}] An optional attribute of type \code{xsd:ID} that identifies the \code{resource} element.
\item[\code{path}] An optional attribute of type \code{xsd:string}. If present, it provides a relative URI template for the identifier of the resource. The resource's base URI is given by the \code{resource} element's parent \code{resource} or \code{resources} element.
\item[\code{type}] An optional attribute whose type is a space-separated list of of \code{xsd:anyURI}. Each value in the list identifies a \code{resource\_type} element (see section \ref{resourcetype}) that defines a set of methods supported by the resource.
\item[\code{queryType}] Defines the media type for the query component of the resource URI. Defaults to \lq application\-/x-www-form-urlencoded\rq\ if not specified which results in query strings being formatted as specified in section 17.13 of HTML 4.01\cite{html401}.
\end{description}

A \code{resource} element contains the following child elements:

\begin{itemize}
\item Zero or more \code{doc} elements -- see section \ref{doc}.
\item Zero or more \code{param} elements (see section \ref{param}) with one of the following values for its \code{style} attribute:
  \begin{description}
  \item[\code{template}] Provides additional information about an embedded template parameter, see above. Child \code{param} elements whose \code{name} attribute value does not match the \emph{name} of an embedded template parameter are ignored.
  \item[\code{matrix}] Specifies a matrix URI parameter
  \item[\code{query}] Specifies a global URI query parameter for all child \code{method} elements of the resource. Does not apply to methods inherited from a \code{resource\_type} specified using the \code{type} attribute.
  \item[\code{header}] Specifies a global HTTP header for use in the request part of all child \code{method} elements of the resource.  Does not apply to methods inherited from a \code{resource\_type} specified using the \code{type} attribute.
  \end{description}
\item Zero or more \code{method} (see section \ref{method}) elements, each of which describes the input to and output from an HTTP protocol method that can be applied to the resource. Such locally-defined methods are added to any methods included in \code{resource\_type} elements referred to using the \code{type} attribute.
\item Zero or more \code{resource} elements that describe sub-resources. Such sub-resources inherit matrix and template parameters from the parent resource since their URI is relative to that of the parent resource but they do not inherit query or header parameters specified globally for the parent resource.
\end{itemize}

The value of the \code{path} attribute may be static or may contain embedded template parameters. At runtime, the values of template parameters are substituted into the resource identifier when the resource is used, see section \ref{genresids} for a detailed example.

Additional information about embedded template parameters can be conveyed using a child \code{param} element with a \code{style} attribute value \lq template\rq\  whose \code{name} attribute value matches the name of the parameter embedded in the template. E.g., in the following the type of the \code{widgetId} template parameter is specified by the child \code{param} element:

\begin{listing}{1}
<resource path="widgets/{widgetId}">
  <param name="widgetId" style="template" type="xsd:int"/>
  ...
</resource>
\end{listing}

\subsubsection{Generating Resource Identifiers}
\label{genresids}

The URI for a \code{resource} element is obtained using the following rules:

\begin{enumerate}
\item Set \emph{identifier} equal to the URI computed (using this process) for the parent element (\code{resource} or \code{resources})
\item If \emph{identifier} doesn't end with a \lq$/$\rq\ then append a \lq$/$\rq\ character to \emph{identifier}
\item Substitute the values of any URI template parameters into the value of the \code{path} attribute
\item Append the value obtained in the previous step to \emph{identifier}
\item For each child \code{param} element (see section \ref{param}), in document order, that has a value of \lq matrix\rq\ for its \code{style} attribute, append a representation of the parameter value to \emph{identifier} according to the following rules:
      \begin{itemize}
      \item Non-boolean matrix parameters are represented as: \lq;\rq\ \emph{name} \lq=\rq\ \emph{value}
      \item Boolean matrix parameters are represented as: \lq;\rq\ \emph{name} when \emph{value} is \code{true} and are omitted from \emph{identifier} when \emph{value} is \code{false}
      \end{itemize}
where \emph{name} is the value of the \code{param} element's \code{name} attribute and \emph{value} is the runtime value of the parameter.
\end{enumerate}

The following example illustrates these rules and shows an extract from a Web application description that provides multiple resources:

\begin{listing}{1}
<resources base="http://example.com/">
  <resource path="widgets">
    <resource path="reports/stock">
      <param name="instockonly" style="matrix"
        type="xsd:boolean"/>
      ...
    </resource>
    <resource path="{widgetId}">
      ...
    </resource>
    ...
  </resource>
  <resource path="accounts/{accountId}">
    ...
  </resource>
</resources>
\end{listing}

The above describes the following resources:
\begin{itemize}
\item A resource identified by a static URI: http://example.com/\-widgets
\item A resource identified by a static URI: http://example.com/\-widgets/reports/stock
\item A resource identified by a matrix URI: http://example.com/\-widgets/reports/stock;instockonly
\item Multiple resources identified by generative URIs: http://example.com/widgets/{\em widgetId}, where the {\em widgetId} component of the URI is replaced at runtime with the value of a runtime parameter called widgetId.
\item Multiple resources identified by generative URIs: http://example.com/accounts/{\em accountId}, where the {\em accountId} component of the URI is replaced at runtime with the value of a runtime parameter called accountId.
\end{itemize}

\subsection{Resource Type}
\label{resourcetype}

A \code{resource\_type} element describes a set of methods that, together, define the behavior of a type of resource. A \code{resource\_type} may be used to define  resource behavior that is expected to be supported by multiple resources.

A \code{resource\_type} element has the following attributes:

\begin{description}
\item[\code{id}] A required attribute of type \code{xsd:ID} that identifies the \code{resource\_type} element.
\end{description}

A \code{resource\_type} element contains the following child elements:

\begin{itemize}
\item Zero or more \code{doc} elements -- see section \ref{doc}.
\item Zero or more \code{param} elements (see section \ref{param}) with one of the following values for its \code{style} attribute:
  \begin{description}
  \item[\code{query}] Specifies a URI query parameter for all child \code{method} elements of the resource type.
  \item[\code{header}] Specifies a HTTP header for use in the request part of all child \code{method} elements of the resource type.
  \end{description}
\item Zero or more \code{method} (see section \ref{method}) elements, each of which describes an HTTP protocol method that can be applied to a resource of this type.
\item Zero or more \code{resource} elements that describe sub-resources of resources of this type. The URI of such sub-resources provided by the \code{path} attribute of the \code{resource} element and is relative to that of the parent resource.
\end{itemize}

\subsection{Method}
\label{method}

A \code{method} element describes the input to and output from an HTTP protocol method that may be applied to a resource. A \code{method} element can either be a method definition or a reference to a method defined elsewhere.

\subsubsection{Method Reference}

A \code{method} reference element is a child of a \code{resource} element that has an \code{href} attribute whose type is \code{xsd:anyURI}. The value of the \code{href} attribute is a URI reference to a \code{method} definition element. A \code{method} reference element MUST NOT have any other WADL-defined attributes or contain any WADL-defined child elements.

This form of \code{method} element may be used to reduce duplication when the same method applies to more than one resource.

\subsubsection{Method Definition}

A \code{method} definition element is a child of a \code{resource} or \code{application} element and has the following attributes:

\begin{description}
\item[\code{name}] Indicates the HTTP method used.
\item[\code{id}] An identifier for the method, required for globally defined methods, not allowed on locally embedded methods. Methods are identified by an XML ID and are referred to using a URI reference.
\end{description}

It is permissible to have multiple child \code{method} elements that have the same value of the \code{name} attribute for a given resource; such siblings represent distinct variations of the same HTTP method and will typically have different input data.

A \code{method} element has the following child elements:
\begin{description}
\item[\code{doc}] Zero or more \code{doc} elements -- see section \ref{doc}.
\item[\code{request}] Describes the input to the method as a collection of parameters and an optional resource representation -- see section \ref{request}.
\item[\code{response}] Zero or more \code{response} elements that describe the possible outputs of the method -- see section \ref{response}.
\end{description}

\subsection{Request}
\label{request}

A \code{request} element describes the input to be included when applying an HTTP method to a resource. A \code{request} element has no attributes and may contain the following child elements:

\begin{enumerate}
\item Zero or more \code{doc} elements -- see section \ref{doc}.
\item Zero or more \code{representation} elements -- see section \ref{representation}. Note that use of \code{representation} elements is confined to HTTP methods that accept an entity body in the request (e.g., PUT or POST). Sibling \code{representation} elements represent logically equivalent alternatives, e.g., a particular resource might support multiple XML grammars for a particular request.
\item Zero or more \code{param} elements (see section \ref{param}) with one of the following values for their \code{style} attribute:
  \begin{description}
  \item[\code{query}] Specifies a URI query parameter for all methods that apply to this resource, see section \ref{requestparam}
  \item[\code{header}] Specifies a HTTP header for use in the request
  \end{description}
\end{enumerate}

\subsubsection{Query Parameters}
\label{requestparam}

Child \code{param} elements (see section \ref{param}) of a \code{resource} or \code{request} with a \code{style} value of \lq query\rq\ represent URI query parameters as described in section 17.13 of HTML 4.01\cite{html401}. The runtime values of query parameters are sent as URI query parameters when the HTTP method is invoked.

The following example shows a resource with a generative URI that supports a single HTTP method with a two optional query parameters:

\begin{listing}{1}
<resources base="http://example.com/widgets">
  <resource path="{widgetId}">
    <param name="customerId" style="query"/>
    <method name="GET">
      <request>
        <param name="verbose" style="query" type="xsd:boolean"/>
      </request>
      <response>
        ...
      </response>
    </method>
  </resource>
</resources>
\end{listing}

If the value of the \code{widgetId} parameter is \lq 123456\rq\, the value of the \code{customerId} parameter is \lq cust1234\rq\, and the value of the \code{verbose} parameter is \lq true\rq\ then the URI on which the HTTP GET will be performed is:
\begin{quote}
\code{http://example.com/widgets/123456?customerId=cust1234\&verbose=true}
\end{quote}

\subsection{Response}
\label{response}

A \code{response} element describes the output that results from performing an HTTP method on a resource. It has the following attributes

\begin{description}
\item[\code{status}] Optionally present on responses, provides a list of HTTP status codes associated with a particular response.
\end{description}

A \code{response} element may contain the following child elements:
 
\begin{itemize}
\item Zero or more \code{doc} elements (see section \ref{doc}).
\item Zero or more \code{representation} elements (see section \ref{representation}), each of which describes a resource representation that may result from performing the method.  Sibling \code{representation} elements indicate logically equivalent alternatives; normal HTTP content negotiation mechanisms may be used to select a particular alternative.
\item Zero or more \code{param} elements (see section \ref{param}) with a value of \lq header\rq\ for their \code{style} attribute, each of which specifies the details of a HTTP header for the response
\end{itemize}

\subsection{Representation}
\label{representation}

A \code{representation} element describes a representation of a resource's state. A \code{representation} element can either be a representation definition or a reference to a representation defined elsewhere.

\subsubsection{Representation Reference}

A \code{representation} reference element can be a child of a \code{request} or \code{response} element. It has a \code{href} attribute of type \code{xsd:anyURI}. The value of the \code{href} attribute is a URI reference to a \code{representation} definition element. A \code{representation} reference element MUST NOT have any other WADL-defined attributes or contain any WADL-defined child elements.

This form of \code{representation} element may be used to reduce duplication when the same representation is used in multiple locations.

\subsubsection{Representation Definition}

A \code{representation} definition element can be a child of a \code{request}, \code{response} or \code{application} element. It has the following attributes:

\begin{description}
\item[\code{id}] An identifier for the representation, required for globally defined representations, not allowed on locally embedded representations. Representations are identified by an XML ID and are referred to using a URI reference.
\item[\code{mediaType}] Indicates the media type of the representation. Media ranges (e.g. \code{text/*}) are acceptable and indicate that any media type in the specified range is supported.
\item[\code{element}] For XML-based representations, specifies the qualified name of the root element as described within the \code{grammars} section -- see section \ref{grammars}. 
\item[\code{profile}] Similar to the HTML \code{profile} attribute, gives the location of one or more meta data profiles, separated by white space. The meta-data profiles define the meaning of the \code{rel} and \code{rev} attributes of descendent \code{link} elements (see section \ref{link}).
\end{description}

In addition to the attributes listed above, a \code{representation} definition element can have zero or more child \code{doc} elements (see section \ref{doc}) and \code{param} elements (see section \ref{repparam}).

\subsubsection{Representation Parameters}
\label{repparam}

A child \code{param} element (see section \ref{param}) is used to parameterize its parent \code{representation} element. Representation parameters can have one of two different functions depending on the media type of the representation:

\begin{enumerate}
\item Define the content of the representation. For \code{representation} elements with a \code{mediaType} attribute whose value is either \lq application/x-www-form-urlencoded\rq\ or \lq multipart/form-data\rq\, the representation parameters define the content of the representation which is formatted according to the media type. The same may apply to other media types.
\item Provide a hint to processors about items of interest within a representation. For XML based representations, representation parameters can be used to identify items of interest with the XML. The \code{path} attribute of a representation parameter indicates the path to the value of the parameter within the representation. For XML-based representations this is an XPath expression.
\end{enumerate}

\subsection{Parameter}
\label{param}

A \code{param} element describes a parameterized component of its parent element. A \code{param} element can either be a parameter definition or a reference to a parameter defined elsewhere.

\subsubsection{Parameter Reference}

A \code{param} reference element is a \code{param} element that has an \code{href} attribute whose type is \code{xsd:anyURI}. The value of the \code{href} attribute is a URI reference to a \code{param} definition element. A \code{param} reference element MUST NOT have any other WADL-defined attributes or contain any WADL-defined child elements.

This form of \code{param} element may be used to reduce duplication when the same parameter applies to more than one parent.

\subsubsection{Parameter Definition}

A \code{param} definition element describes a parameterized component of its parent element and may be a child of a \code{resource} (see section \ref{resource}), \code{application} (see section \ref{application}), \code{request} (see section \ref{request}), \code{response} (see section \ref{response}), or a \code{representation} (see section \ref{representation}) element. A \code{param} definition element has zero or more \code{doc} child elements (see section \ref{doc}), zero or more \code{option} child elements (see section \ref{option}), an optional \code{link} child element (see section \ref{link}) and has the following attributes:

\begin{description}
\item[\code{id}] An optional identifier that may be used to refer to a parameter definition using a URI reference.
\item[\code{name}] The name of the parameter as an xsd:NMTOKEN. Required.
\item[\code{style}] Indicates the parameter style, table \ref{stylestable} on page \pageref{stylestable} lists the allowed values and shows the context(s) in which each value may be used.
\item[\code{type}] Optionally indicates the type of the parameter as an XML qualified name, defaults to \code{xsd:string}.
\item[\code{default}] Optionally provides a value that is considered identical to an unspecified parameter value.
\item[\code{path}] When the parent element is a \code{representation} element, this attribute optionally provides a path to the value of the parameter within the representation. For XML representations, use of XPath 1.0\cite{xpath10} is recommended.
\item[\code{required}] Optionally indicates whether the parameter is required to be present or not, defaults to false (parameter not required).
\item[\code{repeating}] Optionally indicates whether the parameter is single valued or may have multiple values, defaults to false (parameter is single valued).
\item[\code{fixed}] Optionally provides a fixed value for the parameter.
\end{description}

Note that some combinations of the above attributes might not make sense in all cases. E.g. matrix URI parameters are normally optional so a \code{param} element with a \code{style} value of \lq matrix\rq\ and a \code{required} value of \lq true\rq\ might be unwise.

\begin{table}
\caption{Values of \code{style} attribute and context for use}
\label{stylestable}
\center
\begin{tabularx}{\textwidth}{|l|l|X|}
\hline
\bfseries Value & \bfseries \code{param} Parent Element(s)  & \bfseries Usage \tabularnewline
\hline\hline
\code{matrix} & \code{resource} & \raggedright Specifies a matrix URI component. \tabularnewline
\hline
\code{header} & \code{resource}, \code{resource\_type}, \code{request} or \code{response} & \raggedright Specifies a HTTP header that pertains to the HTTP request (\code{resource} or \code{request}) or HTTP response (\code{response}) \tabularnewline
\hline
\code{query} & \code{resource}, \code{resource\_type} or \code{request} & \raggedright Specifies a URI query parameter represented according to the rules for the query component media type specified by the \code{queryType} attribute. \tabularnewline
\hline
\code{query} & \code{representation} & \raggedright Specifies a component of the representation as a name value pair formatted according to the rules of the media type. Typically used with media type \lq application/x-www-form-urlencoded\rq\ or \lq multipart/form-data\rq. \tabularnewline
\hline
\code{template} & \code{resource} & \raggedright The parameter is represented as a string encoding of the parameter value and is substituted into the value of the \code{path} attribute of the \code{resource} element as described in section \ref{genresids}. \tabularnewline
\hline
\code{plain} & \code{representation} & \raggedright Specifies a component of the representation formatted as a string encoding of the parameter value according to the rules of the media type. \tabularnewline
\hline
\end{tabularx}
\end{table}

\subsubsection{Option}
\label{option}

An \code{option} element defines one of a set of possible values for the parameter represented by its parent \code{param} element. An \code{option} element has the following attributes:

\begin{description}
\item[\code{value}] A required attribute that defines one of the possible values of the parent parameter.
\item[\code{mediaType}] When present this indicates that the parent parameter acts as a media type selector for responses. The value of the attribute is the media type that is expected when the parameter has the value given in the \code{value} attribute.
\end{description}

The following example shows a resource method with a query parameter that may be used to request a particular response format:

\begin{listing}{1}
<method name="GET">
  <request>
    <param name="format" style="query">
      <option value="xml" mediaType="application/xml"/>
      <option value="json" mediaType="application/json"/>
    </param>
    ...
  </request>
  <response>
    <representation mediaType="application/xml"/>
    <representation mediaType="application/json"/>
  </response>
</method>
\end{listing}

An \code{option} element may have zero or more \code{doc} elements that document the meaning of the value.

\subsubsection{Link}
\label{link}

A \code{link} element is used to identify links to resources within representations. A \code{link} element is a child of a \code{param} element whose \code{path} attribute identifies the portion of its parent representation that contains a link URI.

A \code{link} element contains zero or more \code{doc} elements (see section \ref{doc}) and has the following attributes:

\begin{description}
\item[\code{resource\_type}] An optional URI reference to a \code{resource\_type} element that defines the capabilities of the resource that the link identifies.
\item[\code{rel}] An optional token that identifies the relationship of the resource identified by the link to the resource whose representation the link is embedded in. The value is scoped by the value of the ancestor \code{representation} element's \code{profile} attribute.
\item[\code{rev}] An optional token that identifies the relationship of the resource whose representation the link is embedded in to the resource identified by the link. This is the reverse relationship to that identified by  the \code{rel} attribute. The value is scoped by the value of the ancestor \code{representation} element's \code{profile} attribute.
\end{description}

The following example shows an XML-based resource representation and two possible alternative WADL representation elements:

\begin{listing}{1}
<!-- XML-based representation of a widget -->
<w:widget xmlns:w="http://example.com/widgets">
  <w:loc>http://example.com/widgets/110113</w:loc>
  <w:name>A Widget</w:name>
  <w:description>A very useful gizmo.</w:description>
  <w:price currency="USD">19.99</w:price>
  <w:list>http://example.com/widgets</w:list>
</w:widget>

<!-- WADL fragment describing the widget representation
     without parameters-->
<representation mediaType="application/xml" 
  element="w:widget"/>

<!-- WADL fragment describing the widget representation
     with parameters -->
<representation mediaType="application/xml"
  element="w:widget">
  <param name="location" style="plain"
    type="xsd:anyURI" path="/w:widget/w:loc">
    <link resource_type="#widget" rel="self"/>
  </param>
  <param name="index" style="plain"
    type="xsd:anyURI" path="/w:widget/w:list">
    <link resource_type="#widgets" rel="index" rev="child"/>
  </param>
</representation>
\end{listing} 

The second version identifies two links within a widget representation:

\begin{description}
\item[\code{location}] The URI of a widget resource. A widget resource is described by the WADL \code{resource\_type} element whose \code{id} is \lq widget\rq.
\item[\code{index}] The URI of a resource that acts as an index of widgets. The index resource is described by the WADL \code{resource\_type} element whose \code{id} is \lq widgets\rq.
\end{description}

\subsection{Extensibility}

Most WADL-defined elements are extensible using either elements or attributes from foreign namespaces. A WADL processor MAY ignore extensions that it does not understand and extension authors should design extensions with this in mind.

\section{Use of RelaxNG with WADL}
\label{usingrelaxng}

One or more legal RelaxNG schemas may be embedded within a WADL \code{grammars} element or may be included by reference using an \code{include} element. Multiple RelaxNG schemas may be combined within a single schema using the facilities provided by RelaxNG (e.g., \code{rng:include}). The default namespace for an included RelaxNG grammar is the default namespace of the WADL \code{grammars} element.

The \code{element} attribute of \code{representation} element refers to a corresponding RelaxNG element pattern using the XML qualified name of the element.

\section{Use of W3C XML Schema with WADL}
\label{usingxsd}

One or more legal W3C XML Schemas may be embedded within a WADL \code{grammars} element or may be included by reference using a \code{include} element. Multiple W3C XML Schemas may be combined within a single schema using the facilities provided by W3C XML Schema (e.g., \code{xsd:include}).

The \code{element} attribute of \code{representation} element refers to a corresponding W3C XML Schema global element declaration using the XML qualified name of the element.

\section{WADL Media Type}

WADL documents should be served using the \code{application/vnd.sun.wadl+xml} media type and use a \code{.wadl} filename extension. See the WADL media type registration\cite{wadlmedia} for full details.

\appendix
\cleardoublepage

\section{Additional Examples}

\subsection{Amazon Item Search}

The following shows a WADL description of the Amazon item search service\cite{amazonws}:
                
\listinginput[1]{1}{AmazonSearch.wadl}

Note the following:

\begin{itemize}
\item  The method is attached to the resource as a reference to a globally defined method rather than being embedded directly. In this instance there is no need to do this beyond illustrating the capability but this is useful where one method can be applied to multiple resources.
\item  A number of the query parameters are marked as fixed value. The Amazon API uses query parameters to identify services and operations within those services --- use of the fixed attribute can be used to allow description of multiple logical methods on the same resource. Without the ability to fix values in this way, the Amazon API would look like one single method with many parameters.
\item The \code{SearchIndex} and \code{ResponseGroup} parameters both have an enumerated set of possible values. In both cases only a subset of possible values is shown to minimize the length of the example.
\end{itemize}

\subsection{Atom Publishing Protocol}

The Atom publishing protocol\cite{atompub} defines a set of methods to
introspect, view and update entries in an Atom feed. The publishing protocol is bootstrapped by performing a HTTP GET on a known URI for a particular set of feeds. The response consists of an XML document, of media type application/atomserv+xml, that describes the available feeds. An example of such is shown below:

\begin{listing}{1}
<service xmlns="http://www.w3.org/2007/app"
     xmlns:atom="http://www.w3.org/2005/Atom"> 
  <workspace> 
    <atom:title>Main Site</atom:title>
    <collection 
        href="http://example.org/blog/main" > 
      <atom:title>Main Site</atom:title>
    </collection> 
    <collection 
      href="http://example.org/blog/pic" > 
      <atom:title>Pictures</atom:title>
      <accept>image/*</accept>
    </collection> 
  </workspace> 
</service>
\end{listing}

Note the similarity between the Atom service document and WADL, both describe a set of resources and methods that may be applied to them. In the case of an Atom service document the applicable methods are implicit as they are defined by the Atom Publishing Protocol. An Atom service document also defines some additional metadata (the feed title) specific to the protocol domain. One could replicate the information in an Atom service document using WADL as follows.

The first step is to create a WADL document that contains the Atom protocol methods associated with feeds, associated representations and resource types. This only needs to be done once since the contents of this document can then be re-used by WADL documents specific to each site.

\begin{listing}{1}
<application xmlns="http://wadl.dev.java.net/2009/02" 
  xmlns:app="http://www.w3.org/2007/app" 
  xmlns:atom="http://www.w3.org/2005/Atom"> 

  <grammars> 
    <include href="http://www.w3.org/2007/app/app.xsd"/> 
  </grammars>
  
  <resource_type id="entry_feed"> 
    <method href="#getFeed"/> 
    <method href="#addEntryCollectionMember"/> 
  </resource> 

  <resource_type id="media_feed"> 
    <method href="#getFeed"/> 
    <method href="#addImageCollectionMember"/> 
  </resource> 

  <representation id="entry" mediaType="application/atom+xml" 
    element="atom:entry"/>

  <representation id="feed" mediaType="application/atom+xml" 
    element="atom:feed">
    <param name="first_link" style="plain"
      path="/atom:feed/atom:link[@rel='first']">
      <link resource_type="#entry_feed" rel="first"/>
    </representation>
    <param name="next_link" style="plain"
      path="/atom:feed/atom:link[@rel='next']">
      <link resource_type="#entry_feed" rel="next" rev="previous"/>
    </param>
    <param name="prev_link" style="plain"
      path="/atom:feed/atom:link[@rel='previous']">
      <link resource_type="#entry_feed" rel="previous" rev="next"/>
    </param>
    <param name="last_link" style="plain"
      path="/atom:feed/atom:link[@rel='last']">
      <link resource_type="#entry_feed" rel="last"/>
    </param>
  </representation> 

  <method name="GET" id="getFeed"> 
    <response> 
      <representation href="#feed"/> 
    </response> 
  </method>

  <method name="POST" id="addEntryCollectionMember"> 
    <request> 
      <representation href="#entry"/> 
    </request> 
    <response status="201"> 
      <param name="location" style="header" type="xsd:anyURI"
        required="true"/>
      <representation href="#entry"/> 
    </response> 
  </method> 

  <method name="POST" id="addImageCollectionMember"> 
    <request> 
      <representation mediaType="image/*"/> 
    </request> 
    <response status="201"> 
      <param name="location" style="header" type="xsd:anyURI"
        required="true"/>
      <representation href="#entry"/> 
    </response> 
  </method> 

</application>
\end{listing}

Note that the above WADL doesn't define any concrete resources only resource types, methods and representations. Given the preceding document located at http://www.w3.org/2007/app.wadl, one can create a WADL alternative to the Atom service document as follows:

\begin{listing}{1}
<application xmlns="http://research.sun.com/wadl/2006/07" 
  xmlns:app="http://www.w3.org/2007/app" 
  xmlns:atom="http://www.w3.org/2005/Atom"> 

  <resources base="http://example.org/"> 
    <resource path="blog/main"
      type="http://www.w3.org/2007/app.wadl#entry_feed">
      <doc title="Main Site"/>
    </resource>
    <resource path="blog/pic"
      type="http://www.w3.org/2007/app.wadl#media_feed">
      <doc title="Pictures"/>
    </resource>
  </resources> 
</application>
\end{listing}

The above WADL document describes the following resources in terms of the resource types we defined earlier:

\begin{itemize}
\item \code{http://example.org/blog/main}\newline This resource supports HTTP GET to retrieve an Atom feed document and HTTP POST to add a new entry to the feed.
\item \code{http://example.org/blog/pic}\newline This resource supports HTTP GET to retrieve an Atom feed document and HTTP POST to add a new image to the feed.
\end{itemize}

\cleardoublepage
\section{RelaxNG Schema for WADL}

\listinginput[1]{1}{wadl.rnc}

\cleardoublepage
\section{XML Schema for WADL}

\listinginput[1]{1}{wadl.xsd}

\cleardoublepage
{\raggedright
\bibliographystyle{unsrt}
\bibliography{references}
}

\section{Document History}

This section lists changes to the specification and grammar of WADL for each release. Changes may reference issues which may be viewed in the issue tracker at:
\begin{quote}\code{https://wadl.dev.java.net/issues/show\_bug.cgi?id=}{\em issueNumber}\end{quote} 
where {\em issueNumber} is the number of the issue.

\subsection{Changes since November 2006 Publication}

\begin{itemize}
\item The namespace was changed to \code{http://wadl.dev.java.net/2009/02}.
\item Resolved issue 13. The \code{status} attribute was moved from the \code{representation} element to the \code{response} element. The cardinality of the \code{response} element was changed from 0--1 to 0--many. The \code{fault} element was removed.
\item Resolved issue 17. Allow parameters at top level and parameter references to prevent repetition when a parameter is used in multiple places.
\item Resolved issue 18. A \code{resource\_type} element may now contain \code{resource} child elements.
\item Resolved issue 20. Allow multiple resources elements within an application.
\item Updated the Atompub example to RFC syntax.
\end{itemize}

\section*{Acknowledgments}

Thanks to the members of the http://lists.w3.org/\-Archives/\-Public/\-public-web-http-desc/ and http://wadl.\-dev.\-java.\-net/\-servlets/\-Summarize\-List?\-listName=\-users mailing lists who provided useful feedback on several iterations of this specification. Mark Nottingham and John Nienart (Yahoo!) provided extensive feedback and helped structure the overall design. 

\clearpage
\section*{Copyright Notice}

Copyright © 2005--2009 Sun Microsystems, Inc., 4150 Network Circle, Santa Clara, California 95054, U.S.A. All rights reserved.

Unlimited copying without fee is permitted provided that the copies are not made nor distributed for direct commercial advantage, and credit to the source is given. Otherwise, no part of this work covered by copyright may be reproduced in any form or by any means graphic, electronic, or mechanical, including photocopying, recording, taping, or storage in an information retrieval system, without the prior written permission of the copyright owner.

U.S. Government Rights - Commercial software.  Government users are subject to the Sun Microsystems, Inc. standard license agreement and applicable provisions of the FAR and its supplements. 

Sun,  Sun Microsystems and  the Sun logo are trademarks or registered trademarks of Sun Microsystems, Inc. in the U.S. and other countries.

\raggedright DOCUMENTATION IS PROVIDED "AS IS" AND ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT, ARE DISCLAIMED, EXCEPT TO THE EXTENT THAT SUCH DISCLAIMERS ARE HELD TO BE LEGALLY INVALID. 
\end{document} 